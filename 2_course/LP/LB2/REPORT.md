#№ Отчет по лабораторной работе №2
## по курсу "Логическое программирование"

## Решение логических задач

### студент: Мохляков П.А.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|              |      5-       |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение

Задачи можно разделить на два основыных типа: задани на учтановления соответстий и задачи с фиксированным числом состояний(метот перебора или генерации гипотезы). На самом делале оба варианта решаются методом перебора, только в первом случа пролог генерирует варианты ответа сам на основе файтов, а во втором случае мы пишем генератор сами. Далее мы проверяем, подходит ли этот набор решений под файты(правила, выксазывания), которые мы описываем выше. Также в некоторый задачах необходимо описать и использовать предикат на проверку уникальности элиментов в списке, чтобы они не повторялись в пределах списка.

## Задание

Дима, Герман и Олег  студенты. Каждый из них увлекается тремя предметами из четырех: биологией, химией, историей, математикой. Вот что они говорили о своих склонностях. Герман. Дима  единственный из нас, кто любит историю. Олег и я увлекаемся одними и теми же предметами. Мы все считаем биологию интереснейшей наукой. Двое из нас любят и химию, и биологию. Олег. Нам всем очень нравится математика. Герман  завзятый историк. В одном из увлечений мы расходимся с Димой. Герман и Дима любят химию. Дима. Есть только один предмет, который любим мы все. Математикой увлекаюсь я один. Каждый из нас любит разное сочетание дисциплин. Олег ошибается, говоря, что Герман и я увлекаемся химией. Известно, что только два из утверждений каждого студента соответствуют действительности. Попробуйте сказать, какими науками увлекается каждый из них?

## Принцип решения

Решение начинается с описания правил, которые указаны в задаче.

```prolog
twoiz([Ger,Oleg,_]):- member("биология",Ger),member("химия",Ger),member("биология",Oleg),member("химия",Oleg).
twoiz([Ger,_,Dima]):- member("биология",Ger),member("химия",Ger),member("биология",Dima),member("химия",Dima).
twoiz([_,Oleg,Dima]):- member("биология",Dima),member("химия",Dima),member("биология",Oleg),member("химия",Oleg).

say(g,1,[G,O,D]):-member("история",D),not(member("история",G)),not(member("история",O)).
say(g,2,[G,O,_]):-intersect(G,O,L),length(L,3).
say(g,3,[G,O,D]):-member("биология",G),member("биология",O),member("биология",D).
say(g,4,[G,O,D]):-twoiz([G,O,D]).

say(o,1,[G,O,D]):-member("математика",G),member("математика",O),member("математика",D).
say(o,2,[G,_,_]):-member("история",G).
say(o,3,[_,O,D]):-subtract(O,D,L),length(L, 1).
say(o,4,[G,_,D]):-member("химия",G),member("химия",D).

say(d,1,[G,O,D]):-intersect(G,O,L1),intersect(D,L1,L2),length(L2, 1).
say(d,2,[G,O,D]):-not(member("математика",G)),not(member("математика",O)),member("математика",D).
say(d,3,[G,O,D]):-intersect(G,O,L1),intersect(G,D,L2),intersect(D,O,L3),
        length(L1, I1),length(L2, I2),length(L3, I3), I1 < 3,I2 < 3,I3 < 3.
say(d,4,[G,_,D]):-not(say(o,4,[G,_,D])).
```

Большенство правил работают на принадлежности элимента к тому или иному списку.

Но для некоторых правил понадобились дополнительные предикаты:

Предикат вычитание списка из списка
```prolog
subtract([], _, []) :- !.
subtract([A|C], B, D) :-
        member(A, B), !,
        subtract(C, B, D).
subtract([A|B], C, [A|D]) :-
        subtract(B, C, D).
```

Предикат мересечения множеств на основе списков

```prolog
memb(_,[]) :- fail.
memb(X,[X|_]) :- !.
memb(X,[_|T]) :- memb(X,T).
 
intersect([],_,[]).
intersect([H|T],Y,[H|R]) :- memb(H,Y),intersect(T,Y,R), !.
intersect([_|T],Y,R) :- intersect(T,Y,R), !.
```

Используя эти предикаты и предикат опредикат длины списка можно описать все высказывания в задаче.

В моем случае только 2 высказывания каждого ученика являются истинными, поэтому нам придется перебирать не только ответ, но и высказывания, на основе которых он строится.

Поэтому опишем функцию перебора правил:

```prolog
elems([T1,T2,L1,L2],T1,T2,L1,L2).

check(N,S):-
        permutation([1,2,3,4],P),elems(P,T1,T2,L1,L2),
        say(N,T1,S), say(N,T2,S), not(say(N,L1,S)), not(say(N,L2,S)).
```

Предикат check перебирает все возможные варианты пар истинных и ложных пар для каждого ученика. 


Теперь мы можем описать предикат поиска перения

```prolog

solve(Ger,Oleg,Dima):-
        permutation(["биология","химия","математика","история"],G),
        permutation(["биология","химия","математика","история"],O),
        permutation(["биология","химия","математика","история"],D),
        threeelem(G,Ger),threeelem(O,Oleg),threeelem(D,Dima),
        check(g,[Ger,Oleg,Dima]),check(o,[Ger,Oleg,Dima]),check(d,[Ger,Oleg,Dima]),!.
```

С помощью permitation мы передираем все варинты порядка предметов, но у каждого ученика 3 любимых предмета, а не 4, поэтому необходимо описать предикат, который будет возвращать первые три элимента из четырех.

```prolog
threeelem([_|Tail],Tail):-length(Tail,3).
```

Далее мы делаем проверку условий для каждого варианта набора предметов, пока мы не найдем нужный набор прдметов и правил. Тем самым найдя ответ.

    X = ["биология", "химия", "математика"],
    Y = ["биология", "математика", "история"],
    Z = ["биология", "химия", "история"].

    Герман - "биология", "химия", "математика"
    Олег - "биология", "математика", "история"
    Дима - "биология", "химия", "история"

## Выводы

В этой лабораторной работе я научился решать с помощью языка prolog. С его помощью сравнительно легко и удобно их описывать и решать, но при этом решение достаточно не эффективно, так как задача решается с помощью перебора решений, что означает, что задача решается за факториальную сложность O(n!). Из-за этого могут возникнуть проблемы с крупными задачами, где много переменных и вариантов для них. Но все же нельзя отрицать, что языки программирования основывающиеся на логической парадигме, подходят лучше всего для решения логических задач.




